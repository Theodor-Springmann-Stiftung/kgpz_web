{{ if ne (len .model.Search) 1 }}
	{{ $agent := index $.model.Agents .model.Search }}
	{{ if not $agent }}
		<div>Agent nicht gefunden: {{ .model.Search }}</div>
	{{ else }}
		<div>
			{{ $letter := Upper (FirstLetter $agent.ID) }}
			<a href="/akteure/{{ $letter }}">
				&larr; Personen &amp; KÃ¶rperschaften &ndash; Buchstabe
				{{ $letter }}
			</a>
		</div>
		<div>{{ index $agent.Names 0 }}</div>
	{{ end }}
{{ else }}
	<div>
		{{ range $_, $l := .model.AvailableLetters }}
			<a href="/akteure/{{ $l }}">
				{{ $l }}
			</a>
		{{ end }}
	</div>

	{{ range $_, $id := .model.Sorted }}
		{{ $a := index $.model.Agents $id }}
		{{ if and $a (ne (len $a.Names) 0) }}
			<div class="pb-4">
				{{ index $a.Names 0 }}
				<div>
					{{ $gnd := GetGND $a.GND }}
					{{ if (ne $gnd nil) }}
						{{- if	ne (len $gnd.DateOfBirth) 0 -}}
							<i class="ri-asterisk text-xs relative bottom-0.5"></i>&nbsp;
							{{- HRDateShort (index $gnd.DateOfBirth 0) -}}
						{{- end -}}
						{{- if	ne (len $gnd.DateOfDeath) 0 }}
							&emsp;<i class="ri-cross-fill text-xs relative bottom-0.5"></i
							>&nbsp;{{ HRDateShort (index $gnd.DateOfDeath 0) }}
						{{ end }}
						{{- if ne (len $gnd.ProfessionOrOccupation) 0 -}}
							<div>
								{{- (index $gnd.ProfessionOrOccupation 0).Label -}}
								{{- if gt (len $gnd.ProfessionOrOccupation) 1 -}}
									,
									{{ (index $gnd.ProfessionOrOccupation 1).Label -}}
								{{ end -}}
								{{- if gt (len $gnd.ProfessionOrOccupation) 2 -}}
									,
									{{ (index $gnd.ProfessionOrOccupation 2).Label -}}
								{{ end -}}
							</div>
						{{ end }}
					{{ end }}
					<div class="flex gap-x-2 flex-row">
						<a href="/akteure/{{ $id }}" class="!no-underline"><i class="ri-links-line"></i></a>
						{{- if ne $gnd nil -}}
							<a href="{{ $a.GND }}" target="_blank">GND &rarr;</a>
							{{- if ne (len $gnd.Wikipedia) 0 -}}
								<a href="{{ (index $gnd.Wikipedia 0).Label }}" target="_blank">WIKI &rarr;</a>
							{{ end -}}
						{{ end }}

					</div>
				</div>
				{{- if ne (len $a.Works) 0 -}}
					<div>
						{{ range $_, $w := $a.Works }}
							{{- if ne (len $w.Citation.InnerXML ) 0 -}}
								<div xslt-template="citation-xslt" xslt-onload>
									<xml>
										{{- Safe $w.Citation.InnerXML -}}
									</xml>
								</div>
							{{- end -}}
						{{ end }}
					</div>
				{{ end }}

				{{- if ne (len $a.Pieces) 0 -}}
					<div>
						{{ range $_, $p := $a.Pieces }}
							{{- range $_, $i := $p.IssueRefs -}}
								<div>
									<a href="/{{ $i.When }}/{{ $i.Nr }}">{{ $i.Nr }}/{{ $i.When }}</a>
								</div>
							{{- end -}}
						{{ end }}
					</div>
				{{ end }}
			</div>
		{{ end }}
	{{ end }}
{{ end }}

<script id="citation-xslt" type="application/xml">
	{{ EmbedSafe "xslt/citation.xsl" }}
</script>
